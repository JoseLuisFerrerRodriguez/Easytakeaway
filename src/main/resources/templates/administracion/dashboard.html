<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" >

<head th:replace="~{plantilla/base :: head(#{nombreEmpresa}+' - GestiÃ³n', 'none')}">

</head>

<body>

<div th:replace="~{plantilla/baseAdmin :: menu}"></div>

<div class="container">

    <div id="chartContainer" style="height: 370px; width: 100%;"></div>
    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>

</div>

<footer th:insert="~{plantilla/base :: pie_final}"></footer>
<div th:insert="~{/plantilla/base :: scripts}"></div>


<script type="text/javascript">
    window.onload = function() {

        var dps = [ [], [] ];

        var chart = new CanvasJS.Chart("chartContainer", {
            exportEnabled: true,
            animationEnabled: true,
            theme: "dark1",
            title: {
                text: "Analysis of AdWords Click"
            },
            subtitles: [{
                text: "Click Legend to Hide or Unhide Data Series"
            }],
            axisY: {
                title: "Cost Per Click",
                titleFontColor: "#4F81BC",
                lineColor: "#4F81BC",
                labelFontColor: "#4F81BC",
                tickColor: "#4F81BC",
                includeZero: true,
                prefix: "$"
            },
            axisY2: {
                title: "Clicks",
                titleFontColor: "#C0504E",
                lineColor: "#C0504E",
                labelFontColor: "#C0504E",
                tickColor: "#C0504E"
            },
            toolTip: {
                shared: true
            },
            legend: {
                cursor: "pointer",
                itemclick: toggleDataSeries
            },
            data: [{
                type: "column",
                name: "Cost Per Click",
                showInLegend: true,
                yValueFormatString: "$#,##0.00",
                dataPoints: dps[0]
            },
            {
                type: "column",
                name: "Click",
                axisYType: "secondary",
                showInLegend: true,
                dataPoints: dps[1]
            }]
        });

        var yValue;
        var label;

         <th:block th:each="dataPointsList, loopStatus1 : ${dataPointsList}">
            <th:block th:each="dataPoint, loopStatus2 : ${dataPointsList[loopStatus1.index]}">
                    var yValue = parseFloat([[${dataPoint?.y}]]);
                    var label = "[[${dataPoint?.label}]]";
                    dps[parseInt([[${loopStatus1?.index}]])].push({
                        label : label,
                        y : yValue
                    });
            </th:block>
        </th:block>

        chart.render();

        function toggleDataSeries(e) {
            if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                e.dataSeries.visible = false;
            } else {
                e.dataSeries.visible = true;
            }
            e.chart.render();
        }

    }
</script>

</body>
</html>